# M1: Coherencia y Sistema de Contenido

## OBJETIVO (OBJ)
Unificar las reglas del agente y las skills para eliminar contradicciones y establecer un sistema robusto de gestión de contenido (Real vs Draft).

## ALCANCE (ALC)
- Refactorización de `.agent/rules` y `.agent/skills`.
- Creación de tipos TypeScript para el estado del contenido.
- Script de validación de contenido.

## PASOS
1.  **Auditoría de Skills y Reglas**:
    - Revisar `agent_rules.md` y `SKILL.md` en busca de conflictos (ej: stack preferido, reglas de CSS).
    - Unificar criterio: Tailwind v4 (si aplica) o v3 + CSS Variables.
2.  **Sistema de Contenido (Content State)**:
    - Crear `types/content.ts` (o ubicación equivalente en `shared`).
    - Definir interfaz `ContentItem`:
        ```typescript
        type ContentStatus = 'REAL' | 'DRAFT' | 'PENDING';
        interface ContentBlock {
          text: string;
          status: ContentStatus;
          notes?: string;
        }
        ```
    - Implementar utilidades para renderizar contenido solo si no es `PENDING` en producción, o mostrar warning en dev.
3.  **Checker Script**:
    - Crear `scripts/check-content.mjs`.
    - Debe escanear archivos JSON/TS de contenido y reportar cuántos items están en `DRAFT` o `PENDING`.
    - Debe fallar en CI si hay items `PENDING` y el target es `production`.

## CRITERIOS DE ACEPTACIÓN (AC)
- [ ] No existen contradicciones entre `agent_rules.md` y las skills utilizadas.
- [ ] Sistema de tipos para `ContentStatus` implementado.
- [ ] Script `check-content` funcional y detecta "lorem ipsum" o status `DRAFT`.
- [ ] Prohibido: Testimonios inventados en modo `REAL`.

## EJECUCIÓN (EJ)
```bash
# Ejemplo de uso del checker
node scripts/check-content.mjs --strict
```

## RIESGOS
- Exceso de rigidez en el checker que impida despliegues rápidos de staging.
- Complejidad al integrar el sistema de tipos con un CMS headless si se decide usar uno.
